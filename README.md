# ⏰ TimeSpent - Калькулятор времени, потраченного на работу

## 📋 Описание проекта

**TimeSpent** - это веб-приложение для анализа того, сколько времени вы тратите на работу ради покрытия своих расходов. Приложение помогает пользователям осознать реальную стоимость их образа жизни и понять, сколько часов работы уходит на оплату различных категорий расходов.

### 🎯 Основная идея

Многие люди не задумываются о том, сколько времени они тратят на работу ради оплаты своих расходов. Это приложение позволяет:
- Ввести зарплату и детальный рабочий график (включая время обеда)
- Категоризировать расходы по группам (жилье, транспорт, еда и т.д.)
- Рассчитать, сколько часов работы уходит на каждую категорию расходов
- Визуально увидеть распределение времени между различными статьями расходов

## 🏗️ Архитектура проекта

Проект построен с использованием методологии **Feature-Sliced Design (FSD)**:

```
src/
├── app/           # Конфигурация приложения, провайдеры, глобальные стили
├── pages/         # Страницы приложения
├── widgets/       # Переиспользуемые составные компоненты
├── features/      # Бизнес-функциональность
├── entities/      # Бизнес-сущности (пока не используется)
└── shared/        # Переиспользуемые утилиты, UI-компоненты, конфигурации
```

### Основные слои:

- **`app/`** - точка входа, провайдеры, глобальные настройки
- **`pages/`** - страницы приложения (MainPage)
- **`widgets/`** - составные компоненты (ThemeChange, LanguageChange)
- **`features/`** - бизнес-логика (timeSpentCalculator, settingsSidebar)
- **`shared/`** - общие утилиты и библиотеки

## 🛠️ Технологический стек

### Frontend Framework
- **React 19.1.0** - основная библиотека для UI
- **TypeScript 5.8.3** - типизация кода
- **Vite 7.0.2** - сборщик и dev-сервер

### UI Framework
- **Material-UI (MUI) 7.2.0** - компонентная библиотека
- **@mui/x-date-pickers 8.7.0** - компоненты для работы с датами
- **@emotion/react & @emotion/styled** - CSS-in-JS решение

### State Management
- **Zustand 5.0.6** - легковесное управление состоянием с throttled persist middleware для автоматического сохранения в localStorage с задержкой 500ms

### Internationalization
- **i18next 25.3.1** - интернационализация
- **react-i18next 15.6.0** - React интеграция
- Поддержка русского и английского языков

### Development Tools
- **Biome 2.0.6** - линтер и форматтер кода
- **Husky 9.0.11** - Git hooks
- **lint-staged 16.1.2** - линтинг только измененных файлов

### Utilities
- **dayjs 1.11.13** - работа с датами
- **uuid 11.1.0** - генерация уникальных идентификаторов

## 🎨 Дизайн и UX

### Темная тема по умолчанию
Приложение использует темную тему Material-UI для комфортной работы в любое время суток.

### Адаптивный интерфейс
- Использование Material-UI Grid системы
- Responsive дизайн для различных размеров экранов
- Оптимизация для мобильных устройств

### Интуитивная навигация
- Боковая панель настроек с переключателем темы и языка
- Группировка расходов по категориям с цветовой кодировкой
- Интерактивные формы с валидацией

## 💼 Бизнес-логика

### Основные сущности

#### WorkTimeSettings (Настройки рабочего времени)
```typescript
type WorkTimeSettings = {
  startTime: Dayjs;        // Начало рабочего дня
  endTime: Dayjs;          // Конец рабочего дня
  lunchStartTime: Dayjs;   // Начало обеда
  lunchEndTime: Dayjs;     // Конец обеда
  includeLunch: boolean;   // Включить обед в расчет
};
```

#### Group (Группа расходов)
```typescript
type Group = {
  id: string;
  name: string;           // Название группы (например, "Квартира")
  color: string;          // Цвет для визуализации
  description: string;    // Описание группы
  items: SpentItem[];    // Список расходов в группе
};
```

#### SpentItem (Статья расхода)
```typescript
type SpentItem = {
  id: string;
  name: string;          // Название расхода
  spent: number;         // Сумма расхода
  spentBy: SpentBy;      // Периодичность (месяц/год/день)
};
```

#### SpentBy (Периодичность)
```typescript
enum SpentBy {
  MONTH = 'month',
  YEAR = 'year',
  DAY = 'day'
}
```

### Предустановленные группы расходов

Приложение поставляется с шестью предустановленными группами:

1. **Квартира** (розовый цвет)
   - Съем квартиры: 50,000 ₽/месяц
   - Квартплата: 5,000 ₽/месяц
   - Клининг: 5,000 ₽/месяц

2. **Транспорт** (зеленый цвет)
   - Бензин: 5,000 ₽/месяц
   - Такси: 5,000 ₽/месяц

3. **Еда** (оранжевый цвет)
   - Продукты: 25,000 ₽/месяц
   - Кофе/кафе: 300 ₽/день

4. **Подписки** (синий цвет)
   - Netflix: 1,000 ₽/месяц
   - Spotify: 500 ₽/месяц
   - Фитнес-клуб: 3,000 ₽/месяц

5. **Развлечения** (фиолетовый цвет)
   - Кино/театр: 1,000 ₽/месяц
   - Игры: 2,000 ₽/месяц

6. **Здоровье** (красный цвет)
   - Стоматология: 5,000 ₽/год
   - Лекарства: 1,000 ₽/месяц

### Функциональность

#### Ввод данных
- **Детальное рабочее время**: выбор начала и конца рабочего дня
- **Время обеда**: настройка времени обеда с возможностью отключения
- **Зарплата**: ввод месячной зарплаты с форматированием
- **Расходы**: добавление/редактирование/удаление статей расходов

#### Управление данными
- Добавление новых групп расходов
- Редактирование существующих групп
- Удаление групп и статей расходов
- Изменение периодичности расходов

#### Расчеты и визуализация
- ✅ Расчет часов работы на каждую категорию расходов
- ✅ Визуализация распределения времени через прогресс-бар
- ✅ Отображение свободных средств (если расходы меньше зарплаты)
- ✅ Детальная разбивка по группам расходов
- ✅ Учет зарплаты при расчете процентов
- ✅ Throttled сохранение данных в localStorage

## 🌐 Интернационализация

Поддержка двух языков:
- **Русский** (по умолчанию)
- **Английский**

### Структура переводов
```
src/shared/lib/i18n/locales/
├── ru.ts          # Общие переводы на русском
└── en.ts          # Общие переводы на английском

src/features/*/i18n.ts  # Переводы для каждой фичи
```

## 🚀 Запуск проекта

### Требования
- Node.js >= 20.19.0
- npm

### Установка зависимостей
```bash
npm install
```

### Разработка
```bash
npm run dev
```

### Сборка
```bash
npm run build
```

### Линтинг и форматирование
```bash
npm run lint      # Проверка кода
npm run format    # Форматирование кода
npm run check     # Проверка и форматирование
```

## 📁 Структура проекта

```
src/
├── app/
│   ├── providers/     # Провайдеры (Theme, i18n, DatePicker)
│   ├── styles/        # Глобальные стили
│   └── index.tsx      # Точка входа
├── pages/
│   └── main/          # Главная страница
├── features/
│   ├── timeSpentCalculator/  # Основная бизнес-логика
│   │   ├── store/           # Zustand stores с throttled persist
│   │   │   ├── settingsStore.ts    # Настройки рабочего времени и зарплаты
│   │   │   └── groupsStore.ts      # Группы расходов
│   │   ├── types/           # TypeScript типы
│   │   ├── ui/              # UI компоненты
│   │   │   ├── WorkTimeInput.tsx      # Ввод рабочего времени
│   │   │   ├── SalaryInput.tsx        # Ввод зарплаты
│   │   │   ├── GroupOfSpent.tsx       # Группа расходов
│   │   │   ├── AddGroupForm.tsx       # Форма добавления группы
│   │   │   ├── PeriodSelector.tsx     # Выбор периода расхода
│   │   │   ├── WorkDayProgress.tsx    # Прогресс-бар рабочего дня
│   │   │   └── TimeSpentCalculator.tsx # Основной компонент
│   │   └── i18n.ts          # Переводы
│   └── settingsSidebar/     # Боковая панель настроек
├── widgets/
│   ├── themeChange/         # Переключатель темы
│   └── languageChange/      # Переключатель языка
└── shared/
    ├── lib/                 # Утилиты
    │   ├── i18n/           # Интернационализация
    │   ├── throttledStorage.ts  # Throttled localStorage
    │   └── uuid.ts         # Генерация UUID
    └── ui/                  # Переиспользуемые UI компоненты
```

## 🔧 Конфигурация

### Vite
- Алиас `@` для `src/`
- React SWC плагин для быстрой сборки
- TypeScript поддержка
- Base path для GitHub Pages

### TypeScript
- Строгая типизация
- Path mapping для импортов
- Современные настройки ES2020

### Biome
- Линтинг и форматирование кода
- Интеграция с Husky для pre-commit hooks
- Игнорирование системных файлов

### Zustand с Throttled Persist
- Автоматическое сохранение в localStorage
- Throttled запись (500ms задержка)
- Восстановление состояния при загрузке

## 🌐 Деплой

### GitHub Pages
Проект настроен для автоматического деплоя на GitHub Pages:

1. **Автоматический деплой** при push в ветку `main`
2. **GitHub Actions** для сборки и деплоя
3. **Base path** настроен для `/timespent/`

Подробные инструкции в файле `DEPLOYMENT.md`

## 🎯 Планы развития

### Краткосрочные задачи
- ✅ Реализация расчета часов работы на каждую категорию
- ✅ Добавление визуализации результатов
- ✅ Сохранение данных в localStorage с throttled persist
- ✅ Интернационализация (русский/английский)
- ✅ Рефакторинг компонентов
- ✅ Настройка GitHub Pages деплоя
- [ ] Добавление возможности экспорта данных

### Долгосрочные планы
- [ ] Бэкенд для сохранения данных пользователей
- [ ] Аналитика и отчеты
- [ ] Сравнение с другими пользователями
- [ ] Рекомендации по оптимизации расходов

## 👨‍💻 Автор

**Gennadiy Ivanov** - [redfur.dev@gmail.com](mailto:redfur.dev@gmail.com)

## 📄 Лицензия

Проект находится в разработке. Все права защищены.
